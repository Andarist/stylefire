!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r(t.stylefire={})}(this,function(t){"use strict";var r=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var a in r=arguments[e])Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);return t},e=0,n="undefined"!=typeof window&&void 0!==window.requestAnimationFrame?function(t){return window.requestAnimationFrame(t)}:function(t){var r=Date.now(),n=Math.max(0,16.7-(r-e));e=r+n,setTimeout(function(){return t(e)},n)};function a(t){var r=[],e=[],n=0,a=!1,o=0;return{cancel:function(t){var r=e.indexOf(t);-1!==r&&e.splice(r,1)},process:function(){for(a=!0,r=(t=[e,r])[0],(e=t[1]).length=0,n=r.length,o=0;o<n;o++)r[o]();var t;a=!1},schedule:function(o,i){void 0===i&&(i=!1),t();var s=i&&a,u=s?r:e;-1===u.indexOf(o)&&(u.push(o),s&&(n=r.length))}}}"undefined"!=typeof performance&&performance.now;var o=!1;function i(){o||(o=!0,n(l))}var s=a(i),u=a(i),f=a(i),c=a(i);function l(t){o=!1,s.process(),u.process(),f.process(),c.process()}var p,d=f.schedule,h=function(t){var r=t.onRead,e=t.onRender,n=t.aliasMap,a=void 0===n?{}:n,o=t.useCache,i=void 0===o||o;return function(t){var n={},o=[],s=!1,u=function(t,r){var e=a[t]||t,i=n[e];n[e]=r,n[e]!==i&&(-1===o.indexOf(e)&&o.push(e),s||(s=!0,d(f)))};function f(r){return void 0===r&&(r=!1),(r||s)&&(e(n,t,o),s=!1,o.length=0),this}return{get:function(e){var o=a[e]||e;return o?i&&void 0!==n[o]?n[o]:r(o,t):n},set:function(t,r){if("string"==typeof t){if(void 0===r)return function(r){return u(t,r)};u(t,r)}else for(var e in t)t.hasOwnProperty(e)&&u(e,t[e]);return this},render:f}}},g=/([a-z])([A-Z])/g,v=function(t){return t.replace(g,"$1-$2").toLowerCase()},m=new Map,y=new Map,b=["Webkit","Moz","O","ms",""],O=b.length,w=function(t,r){void 0===r&&(r=!1);var e=r?y:m;return e.has(t)||function(t){if("undefined"!=typeof document){p=p||document.createElement("div");for(var r=0;r<O;r++){var e=b[r],n=""===e,a=n?t:e+t.charAt(0).toUpperCase()+t.slice(1);a in p.style&&(m.set(t,a),y.set(t,(n?"":"-")+v(a)))}}}(t),e.get(t)||t},x=["","X","Y","Z"],k=["translate","scale","rotate","skew","transformPerspective"].reduce(function(t,r){return x.reduce(function(t,e){return t.push(r+e),t},t)},["x","y","z"]),Y=k.reduce(function(t,r){return t[r]=!0,t},{}),X=function(t){return!0===Y[t]},M=function(t,r){return k.indexOf(t)-k.indexOf(r)},P=function(t){return"transformOriginX"===t||"transformOriginY"===t},C=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var a in r=arguments[e])Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);return t},Z=function(t,r){return function(e){return Math.max(Math.min(e,r),t)}},j=function(t){return{test:(r=t,function(t){return"string"==typeof t&&-1!==t.indexOf(r)}),parse:parseFloat,transform:function(r){return""+r+t}};var r},A=function(t){return function(r){return"string"==typeof r&&0===r.indexOf(t)}},L=function(t){return t.substring(t.indexOf("(")+1,t.lastIndexOf(")"))},R=function(t){return"string"==typeof t?t.split(/,\s*/):[t]};function S(t){var r=t.length;return function(e){for(var n={},a=R(L(e)),o=0;o<r;o++)n[t[o]]=void 0!==a[o]?parseFloat(a[o]):1;return n}}var F={test:function(t){return"number"==typeof t},parse:parseFloat,transform:function(t){return t}},z=C({},F,{transform:Z(0,1)}),I=j("deg"),T=j("%"),q=j("px"),B=C({},F,{default:1}),H=Z(0,255),W=C({},F,{transform:function(t){return Math.round(H(t))}}),E={test:A("rgb"),parse:S(["red","green","blue","alpha"]),transform:function(t){var r=t.red,e=t.green,n=t.blue,a=t.alpha;return function(t){var r=t.red,e=t.green,n=t.blue,a=t.alpha;return"rgba("+r+", "+e+", "+n+", "+(void 0===a?1:a)+")"}({red:W.transform(r),green:W.transform(e),blue:W.transform(n),alpha:a})}},V={test:A("hsl"),parse:S(["hue","saturation","lightness","alpha"]),transform:function(t){var r=t.hue,e=t.saturation,n=t.lightness,a=t.alpha;return function(t){var r=t.hue,e=t.saturation,n=t.lightness,a=t.alpha;return"hsla("+r+", "+e+", "+n+", "+(void 0===a?1:a)+")"}({hue:Math.round(r),saturation:T.transform(e),lightness:T.transform(n),alpha:a})}},$=C({},E,{test:A("#"),parse:function(t){var r,e,n;return t.length>4?(r=t.substr(1,2),e=t.substr(3,2),n=t.substr(5,2)):(r=t.substr(1,1),e=t.substr(2,1),n=t.substr(3,1),r+=r,e+=e,n+=n),{red:parseInt(r,16),green:parseInt(e,16),blue:parseInt(n,16),alpha:1}}}),_={test:function(t){return E.test(t)||V.test(t)||$.test(t)},parse:function(t){return E.test(t)?E.parse(t):V.test(t)?V.parse(t):$.test(t)?$.parse(t):t},transform:function(t){return function(t){return void 0!==t.red}(t)?E.transform(t):function(t){return void 0!==t.hue}(t)?V.transform(t):t}},D={color:_,backgroundColor:_,outlineColor:_,fill:_,stroke:_,borderColor:_,borderTopColor:_,borderRightColor:_,borderBottomColor:_,borderLeftColor:_,borderRadius:q,width:q,maxWidth:q,height:q,maxHeight:q,top:q,left:q,bottom:q,right:q,rotate:I,rotateX:I,rotateY:I,rotateZ:I,scale:B,scaleX:B,scaleY:B,scaleZ:B,skewX:I,skewY:I,distance:q,translateX:q,translateY:q,translateZ:q,perspective:q,opacity:z,transformOriginX:T,transformOriginY:T,transformOriginZ:q},G=function(t){return D[t]},N="number",U="object",J="transform-origin",K="transform",Q="translateZ",tt=";transform: none",rt=function(t,r){return";"+t+":"+r};function et(t,r,e){void 0===r&&(r=!0),void 0===e&&(e=!0);for(var n=!0===r?Object.keys(t):r,a="",o="",i=!1,s=!0,u=!1,f=!1,c=n.length,l=0;l<c;l++){var p=n[l];if(X(p)){for(var d in u=!0,t)X(d)&&-1===n.indexOf(d)&&n.push(d);break}}n.sort(M);var h=n.length;for(l=0;l<h;l++){p=n[l];var g=X(p),v=t[p],m=G(p);g&&(m.default&&v!==m.default||!m.default&&0!==v)&&(s=!1),m&&(typeof v===N||typeof v===U)&&m.transform&&(v=m.transform(v)),g?(o+=p+"("+v+") ",f=p===Q||f):P(p)?(t[p]=v,i=!0):a+=rt(w(p,!0),v)}return i&&(a+=rt(J,(t.transformOriginX||0)+" "+(t.transformOriginY||0)+" "+(t.transformOriginZ||0))),u&&(!f&&e&&(o+=Q+"(0)"),a+=rt(K,s?tt:o)),a}var nt=h({onRead:function(t,r){var e=r.element,n=r.preparseOutput,a=G(t);if(X(t))return a&&a.default||0;var o=window.getComputedStyle(e,null).getPropertyValue(w(t,!0))||0;return n&&a&&a.parse?a.parse(o):o},onRender:function(t,r,e){var n=r.element,a=r.enableHardwareAcceleration;n.style.cssText+=et(t,e,a)},aliasMap:{x:"translateX",y:"translateY",z:"translateZ",originX:"transformOriginX",originY:"transformOriginY",originZ:"transformOriginZ"}}),at=function(t,r){return t/100*r+"px"},ot={fill:_,stroke:_,scale:B,scaleX:B,scaleY:B,opacity:z,fillOpacity:z,strokeOpacity:z},it=h({onRead:function(t,r){var e=r.element;if(X(t)){var n=function(t){return ot[t]}(t);return n?n.default:0}return e.getAttribute(t)},onRender:function(t,r,e){var n=r.dimensions;!function(t,r){for(var e in r)r.hasOwnProperty(e)&&t.setAttribute(e,r[e])}(r.element,function(t,r,e,n){var a=!1,o=!1,i={},s=e?{pathLength:"0",pathSpacing:""+n}:void 0,u=void 0!==t.scale?t.scale||1e-7:t.scaleX||1,f=void 0!==t.scaleY?t.scaleY||1e-7:u||1,c=r.width*((t.originX||50)/100)+r.x,l=r.height*((t.originY||50)/100)+r.y,p=1*u*-c,d=1*f*-l,h=c/u,g=l/f,m={translate:"translate("+t.translateX+", "+t.translateY+") ",scale:"translate("+p+", "+d+") scale("+u+", "+f+") translate("+h+", "+g+") ",rotate:"rotate("+t.rotate+", "+c+", "+l+") ",skewX:"skewX("+t.skewX+") ",skewY:"skewY("+t.skewY+") "};for(var y in t)if(t.hasOwnProperty(y)){var b=t[y];X(y)?a=!0:!e||"pathLength"!==y&&"pathSpacing"!==y||"number"!=typeof b?e&&"pathOffset"===y?i["stroke-dashoffset"]=at(-b,n):i[v(y)]=b:(o=!0,s[y]=at(b,n))}if(o&&(i["stroke-dasharray"]=s.pathLength+" "+s.pathSpacing),a)for(var y in i.transform="",m)if(m.hasOwnProperty(y)){var O="scale"===y?"1":"0";i.transform+=m[y].replace(/undefined/g,O)}return i}(t,n,r.isPath,r.pathLength))},aliasMap:{x:"translateX",y:"translateY",background:"fill"}}),st=new WeakMap,ut=function(t,e){var n=t instanceof SVGElement?function(t){var r=t.getBBox(),e={element:t,dimensions:{x:r.x,y:r.y,width:r.width,height:r.height},isPath:!1};return"path"===t.tagName&&(e.isPath=!0,e.pathLength=t.getTotalLength()),it(e)}(t):function(t,e){return nt(r({element:t,enableHardwareAcceleration:!0,preparseOutput:!0},e))}(t,e);return st.set(t,n),n},ft=function(t,r){return st.has(t)?st.get(t):ut(t,r)};t.default=function(t,r){var e="string"==typeof t?document.querySelector(t):t;return ft(e,r)},t.createStyler=h,t.buildStyles=et,Object.defineProperty(t,"__esModule",{value:!0})});
